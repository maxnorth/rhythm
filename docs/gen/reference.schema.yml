$schema: "http://json-schema.org/draft-07/schema#"
title: "API Reference Documentation"
type: object
required:
  - title
  - summary
  - sections

properties:
  title:
    type: string
    description: "Human-readable page title"
  summary:
    type: string
    description: "Brief summary of the API"
  sections:
    type: array
    description: "Logical documentation sections (Initialization, Tasks, Client, Worker, etc.)"
    items:
      $ref: "#/definitions/Section"

definitions:
  Section:
    type: object
    required:
      - title
      - items
    properties:
      title:
        type: string
        description: "Section heading in rendered docs"
      description:
        type: string
        description: "Optional description of the section"
      examples:
        type: array
        description: "Optional examples for the section"
        items:
          $ref: "#/definitions/Example"
      items:
        type: array
        description: "API items in this section"
        items:
          $ref: "#/definitions/Item"

  Example:
    type: object
    required:
      - code
    properties:
      title:
        type: string
        description: "Optional title for the example"
      description:
        type: string
        description: "Optional description of what the example demonstrates"
      code:
        type: string
        description: "Example code"

  Item:
    type: object
    required:
      - kind
      - name
      - description
    properties:
      kind:
        type: string
        enum: [function, decorator, class, method, type]
        description: "Type of API item"
      name:
        type: string
        description: "Name of the function/decorator/class/parameter/type"
      signature:
        type: string
        description: "Function/method signature or type signature"
      description:
        type: string
        description: "Description of what this does"
      parameters:
        type: array
        description: "List of parameters (for functions/methods)"
        items:
          $ref: "#/definitions/Parameter"
      returns:
        type: string
        description: "Description of return value"
      raises:
        type: array
        description: "List of exceptions that may be raised"
        items:
          type: string
      usage:
        type: string
        description: "Example usage code"
      examples:
        type: array
        description: "Examples for this item"
        items:
          $ref: "#/definitions/Example"

  Parameter:
    type: object
    required:
      - name
      - description
    properties:
      name:
        type: string
        description: "Parameter name"
      type:
        type: string
        description: "Parameter type"
      description:
        type: string
        description: "Parameter description"
